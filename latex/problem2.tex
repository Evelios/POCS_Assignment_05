Mandelbrotian derivation of Zipf's law by minimizing the function
\[
  \Psi(p_1, p_2, ..., p_n)
  =
  F(p_1, p_2, ..., p_n)
  +
  \lambda G(p_1, p_2, ..., p_n)
  \addtag
\]

The `cost over information` is,
\[
  F(p_1, p_2, ..., p_n)
  =
  \frac{C}{H}
  =
  \frac{
    \sum_{i=1}^{n}
      p_i
      ln(i + a)
  }{
    -g
    \sum_{i=1}^{n}
      p_i \ln p_i
  }
  \addtag
\]

The constrain equation is,
\[
  G(p_1, p_2, ..., p_n) =
  \sum_{i=1}^{n}
    p_i - 1
  \, \, \, (= 0)
  \addtag
\]

Minimizing the cost over information...
\[
  \nabla F(p_1, p_2, ..., p_n)
  =
  \nabla
  \frac{
    \sum_{i=1}^{n}
      p_i
      ln(i + a)
  }{
    -g
    \sum_{i=1}^{n}
      p_i \ln p_i
  }
  \addtag
\]

We can look at the gradient component wise, because when taking the partial derivative of the summation, all other terms other then the $i = j$ terms cancel out for that particular vector entry.
\[
  \frac{\partial F}{\partial p_j}
  =
  \frac{\partial}{\partial p_j}
  \frac{
      p_j
      ln(i + a)
  }{
    -g
     (p_j \ ln p_j)
  }
  \addtag
\]

\[
  =
  \frac{\partial}{\partial p_j}
  \frac{ln(i + a)}{-g}
  \frac{
      p_j
  }{
     (p_j \ ln p_j)
  }
  \addtag
\]

\[
  =
  \frac{\partial}{\partial p_j}
  \left(
    \frac{ln(i + a)}{-g}
  \right)
  \left(
    \frac{1}{ln p_j}
  \right)
  \addtag
\]

\[
  =
  \left(
    \frac{ln(i + a)}{-g}
  \right)
  \left(
    \frac{
      1
    }{
      p_j(ln p_j)^2
    }
  \right)
  \addtag
\]

Solving for the gradient of the constrain function...
\[
  \nabla G(p_1, p_2, ..., p_n) =
  \nabla
  \sum_{i=1}^{n}
    p_i - 1
  \addtag
\]

\[
  \frac{\partial G}{\partial p_j}
  =
  \frac{\partial}{\partial p_j}
  (p_i - 1)
  \addtag
\]

\[
  \frac{\partial G}{\partial p_j}
  =
  1
  \addtag
\]

Solving for the critical point,
\[
  \frac{\partial \Psi}{\partial p_j}
  =
  \frac{\partial F}{\partial p_j}
  +
  \lambda
  \frac{\partial G}{\partial p_j}
  =
  0
  \addtag
\]

\[
  0
  =
  \left(
    \frac{ln(i + a)}{-g}
  \right)
  \left(
    \frac{
      1
    }{
      p_j(ln p_j)^2
    }
  \right)
  +
  \lambda
  \addtag
\]

\[
  \left(
    \frac{ln(i + a)}{-g}
  \right)
  \left(
    \frac{
      1
    }{
      p_j(ln p_j)^2
    }
  \right)
  =
  \lambda
  \addtag
\]

\[
  \frac{ln(i + a)}{-g \lambda}
  =
  p_j(ln p_j)^2
  \addtag
\]

I should have reached the following equation, so working on from here.
\[
  p_j
  =
  e^{
    -1 - 
    \lambda H^2 / gC
  }
  (j + a)^{
    -H / gC
  }
  \addtag
\]

Using the constrain equation,
\[
  \sum_{j=1}^{n}
    p_j
  =
  \sum_{j=1}^{n}
    e^{
      -1 - 
      \lambda H^2 / gC
    }
    (j + a)^{
      -H / gC
    }
  =
  1
  \addtag
\]

\[
  \left(
    e^{
      -1 - 
      \lambda H^2 / gC
    }
  \right)
  \sum_{j=1}^{n}
  (j + a)^{
    -H / gC
  }
  =
  1
  \addtag
\]

\[
  \sum_{j=1}^{n}
  (j + a)^{
    -H / gC
  }
  =
  e^{
    1 + 
    \lambda H^2 / gC
  }
  \addtag
\]

Expected Output
\[
  \alpha = H / gC
  \addtag
\]

\[
  p_j = (j + a)^\alpha
  \addtag
\]

Solving for $\lambda$. I am using the equations for $p_j$, $H$, and $C$ below,

\[
  C
  =
  \sum_{j=1}^{n}
    p_i
    ln(j + a)
  \addtag
\]

\[
  H
  =
  -g
  \sum_{j=1}^{n}
    p_j \ln p_j
  \addtag
\]

\[
  p_j
  =
  e^{
    -1 - 
    \lambda H^2 / gC
  }
  (j + a)^{
    -H / gC
  }
  \addtag
\]

\[
  ln \, p_j
  =
  ( 
    -1 - 
    \lambda H^2 / gC
  )
  (
    -H / gC
  ) 
  ln
  (j + a)
  \addtag
\]

The rest follows by starting with the equation for $H$
\[
  H
  =
  -g
  \sum_{j=1}^{n}
    p_j \ln p_j
  \addtag
\]

\[
  H
  =
  -g
  \sum_{j=1}^{n}
    p_j 
  ( 
    -1 - 
    \lambda H^2 / gC
  )
  (
    -H / gC
  ) 
  ln
  (j + a)
  \addtag
\]

\[
  H
  =
  -g
  ( 
    -1 - 
    \lambda H^2 / gC
  )
  (
    -H / gC
  )
  \sum_{j=1}^{n}
    p_i 
  ln(j + a)
  \addtag
\]

\[
  H
  =
  -g
  ( 
    1 + 
    \lambda H^2 / gC
  )
  (
    H / gC
  )
  (C)
  \addtag
\]

\[
  1
  =
  -(1 + 
  \lambda H^2 / gC
  )
  \addtag
\]

\[
  \lambda H^2 / gC
  =
  -2
  \addtag
\]

\[
  \lambda 
  =
  \frac{
    -2gC
  }{
    H^2
  }
  \addtag
\]